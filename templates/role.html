<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Select Role - SheZone</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-pink-100 via-pink-50 to-white flex items-center justify-center p-6">
  <div class="bg-white/80 backdrop-blur-sm p-8 rounded-2xl shadow-xl border border-pink-100 w-full max-w-md text-center">
    <h2 class="text-3xl font-bold text-pink-800 mb-6">Choose Your Role</h2>
    <p class="text-gray-600 mb-8">Are you signing in as a Parent or a Child?</p>

    <div class="flex flex-col gap-4">
      <button
        onclick="selectRole('parent')"
        class="w-full bg-gradient-to-r from-pink-500 to-pink-600 text-white py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300"
      >
        Parent
      </button>

      <button
        onclick="selectRole('child')"
        class="w-full bg-gradient-to-r from-pink-500 to-pink-600 text-white py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300"
      >
        Child
      </button>
    </div>
  </div>

  <script>
    function selectRole(role) {
      if (role === "parent") {
        alert("You selected Parent. Redirecting...");
        window.location.href = "/pdashboard"; // placeholder
      } else {
        alert("You selected Child. Redirecting...");
        window.location.href = "/child-dashboard"; // placeholder
      }
    }
  </script>
   <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

  <script>
    // Your Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyCpd0NHTmbe1WTqdhK0Bw26xvrtRh05EoE",
      authDomain: "shezoneapp.firebaseapp.com",
      projectId: "shezoneapp",
      storageBucket: "shezoneapp.firebasestorage.app",
      messagingSenderId: "178639823528",
      appId: "1:178639823528:web:161605cc37dc724c7a589d",
      measurementId: "G-C8TP9HVVFZ"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // Get the current logged-in user
    const user = auth.currentUser;

async function selectRole(role) {
  try {
    const user = auth.currentUser;

    if (!user) {
      alert("User not logged in!");
      window.location.href = "/login";
      return;
    }

    // Update role in Firestore
    await db.collection("users").doc(user.uid).update({
      role: role
    });

    if (role === "parent") {
      alert("You selected Parent. Redirecting to Parent Dashboard...");
      window.location.href = "/pdashboard";
    } else {
      alert("You selected Child. Redirecting to Child Dashboard...");
      window.location.href = "/child-dashboard";
    }
  } catch (error) {
    alert("Error: " + error.message);
  }
}
</script>

  </script>
</body>
</html>
