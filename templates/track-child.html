<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Parent Dashboard</title>
<style>
body {margin:0; font-family:Poppins; display:flex; flex-direction:column; align-items:center; padding:1rem; background: linear-gradient(135deg,#ffe4ec,#f8bbd9,#f48fb1);}
#map {width:90%; max-width:900px; height:600px; border-radius:15px; border:3px solid #f48fb1;}
</style>
</head>
<body>
<h1>Parent Dashboard - Live Track Child</h1>
<div id="map">{{ folium_map|safe }}</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.min.js"></script>
<script>
var socket = io();

// Update child marker dynamically
socket.on('update_child_marker', function(data){
    var marker = document.querySelector(".leaflet-marker-icon[title='Child Location']");
    if(marker){
        // Folium markers are static in iframe, but you can reload map or use Leaflet JS for full dynamic marker
        location.reload(); // simple approach: reload to update child marker
    }
});
</script>
</body>
</html>
